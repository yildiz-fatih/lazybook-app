<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lazybook</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <h1>lazybook</h1>
    <br />

    <p id="authbar"></p>

    <script>
        function authBar() {
            const bar = document.getElementById('authbar');
            const token = localStorage.getItem('lazy_token');

            bar.textContent = '';

            if (!token) {
                const notLoggedInText = document.createTextNode('not logged in -> ');
                const loginLink = document.createElement('a');
                loginLink.href = './login.html';
                loginLink.textContent = 'log in';

                const separatorText = document.createTextNode(' / ');

                const registerLink = document.createElement('a');
                registerLink.href = './register.html';
                registerLink.textContent = 'register';

                bar.append(notLoggedInText, loginLink, separatorText, registerLink);
                return;
            }

            const loggedInText = document.createTextNode('logged in â€” ');

            const logoutButton = document.createElement('button');
            logoutButton.id = 'logout';
            logoutButton.textContent = 'logout';
            logoutButton.addEventListener('click', () => {
                localStorage.removeItem('lazy_token');
                location.reload();
            });

            bar.append(loggedInText, logoutButton);
        }

        authBar(); // called on page load
    </script>
</body>

</html>